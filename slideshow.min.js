/* 
 * Photo SlideShow
 * Author: Solomon Rubin, Serubin.net
 * Version: 2.0 - Beta
 * 
 * Do not distribute.
 */

function SlideShow(a){function T(a){if(J="undefined"!=typeof a.element?document.getElementById(a.element):document.getElementById("slideshow"),jb("Loading SlideShow element: "+J.id),"undefined"!=typeof a.pre_load&&(j=a.pre_load,jb("Preload: "+j)),"undefined"!=typeof a.random&&(k=a.random,jb("Random: "+k)),"undefined"!=typeof a.interval&&(l=a.interval,jb("Default slide interval is: "+l)),"undefined"!=typeof a.hover_pause&&(m=a.hover_pause,jb("Hover pause: "+m)),"undefined"!=typeof a.transition&&(n=a.transition,jb("Trasition mode is: "+n)),"undefined"!=typeof a.selector_nav&&(o=a.selector_nav,jb("Selector nav: "+o)),"undefined"!=typeof a.arrow_nav&&(p=a.arrow_nav,jb("Arrow nav: "+p)),"undefined"!=typeof a.hover_preview&&(q=a.hover_preview,jb("Hover preview: "+q)),"undefined"!=typeof a.hover_text&&(r=a.hover_text,jb("Hover text: "+r)),"undefined"!=typeof a.height&&("auto"==a.height?(s=hb().y,t=!0):s=a.height),"undefined"!=typeof a.width&&("auto"==a.width?(u=hb().x,v=!0):u=a.width),"undefined"!=typeof a.startOnLoad&&(i=a.startOnLoad),"undefined"!=typeof a.debug&&(x=a.debug),"undefined"!=typeof a.onload&&(y=a.onload),!w){var b=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4))){D=!0;var c=document.createElement("meta");c.name="viewport",c.content="width=device-width, user-scalable=no",document.getElementsByTagName("head")[0].appendChild(c)}}L=document.createElement("div"),L.id="slide-image-wrapper",L.style.width=u,L.style.height=s,z=!0,jb("Initiated")}function U(){if(v&&(u=hb().x),t&&(s=hb().y),J.style.width=u+"px",J.style.height=s+"px",L.style.width=u+"px",L.style.height=s+"px",P.style.display=S.offsetWidth-O.offsetWidth-I<50?"none":"","undefined"!=typeof R)for(var a=0;R.length>a;a++)R[a].style.top="-"+(s/2+100)+"px";eb(A[E])}function V(){jb("Total "+total);for(var a=0;total>a;a++)if(!A[a].loaded)return setTimeout(V,5),0;if(jb("Creating elements"),A.length<1)return ib("function create: no slides loaded, cannot create slideshow DOM objects"),0;if(J.className="slide-container",J.style.width=u+"px",J.style.height=s+"px",K=document.createElement("a"),K.id="slide-link",K.title=r,m&&(W(K,"mousemove",function(){"undefined"!=typeof G&&G.stop()}),W(K,"mouseout",function(){"undefined"!=typeof G&&G.start()})),K.appendChild(L),S=document.createElement("div"),S.id="slide-bar",N=document.createElement("div"),N.id="slide-complete",S.appendChild(N),O=document.createElement("div"),O.id="slide-title",S.appendChild(O),P=document.createElement("div"),P.id="slide-desc",S.appendChild(P),J.appendChild(K),J.appendChild(S),p){var b=document.createElement("a");b.className="slide-arrow",b.id="arrow-left",b.href="javascript:void(0);",b.innerHTML="Previous",W(b,"click",function(a){_(),a.preventDefault()});var c=document.createElement("a");c.className="slide-arrow",c.id="arrow-right",c.href="javascript:void(0);",c.innerHTML="Next",W(c,"click",function(a){Z(),a.preventDefault()}),console.log(c),J.appendChild(b),J.appendChild(c),R=document.getElementsByClassName("slide-arrow")}if(o){var d=document.createElement("ul");d.id="slide-select";for(var a=0;total>a;a++){var e=document.createElement("li");e.className="slide-li-photo-"+a;var f=document.createElement("a");if(f.href="javascript:void(0);",f.className="photo-button",f.id="slide-photo-"+a,f.dataId=a,f.title=A[a].title,W(f,"click",function(a){jb("Selector switch: "+this.dataId),bb(A[this.dataId]),a.preventDefault()}),e.appendChild(f),B.push({id:a,element:e}),q){var g=document.createElement("span");g.className="select-hover",g.style.display="none";var h=document.createElement("img");h.src=A[a].img,h.width="200",h.height="100",g.appendChild(h),e.appendChild(g),W(f,"mouseover",function(){this.nextSibling.style.display=""}),W(f,"mouseout",function(){this.nextSibling.style.display="none"})}d.appendChild(e)}J.appendChild(d)}W(window,"resize",function(){U()}),W(window,"keydown",function(a){return 37==a.keyCode&&_(),39==a.keyCode&&Z(),a.preventDefault(),!1}),i&&Y()}function W(a,b,c){a.addEventListener?a.addEventListener(b,c):a.attachEvent("on"+b,c)}function X(a){function f(a,b){var c=parseInt(a.substring(1,3),16),d=parseInt(a.substring(3,5),16),e=parseInt(a.substring(5,7),16);return"rgba("+c+", "+d+", "+e+", "+b+")"}var b;a=a.substring(1),b=parseInt(a,16),b=16777215^b,b=b.toString(16),b=("000000"+b).slice(-6),a="#"+a,b="#"+b;for(var c=Array(S,O,P),d=0;c.length>d;d++){var e=c[d].style;e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration="500ms",e.webkitTranstion=e.msTranstion=e.MozTranstion=e.OTranstion="color 0.5s, background 0.5s"}S.style.background=f(a,.6),N.style.background=b,O.style.color=b,P.style.color=b}function Y(){"undefined"!=typeof y&&y(),Z(),gb()}function Z(){bb($())}function $(){if(k){var a=Math.floor(Math.random()*total);return H.push(a),A[a]}return A[(E+1)%total]}function _(){bb(ab())}function ab(){if(k){var a=H[H.length-1];return"undefined"!=typeof a?A[a]:$()}return 0==E?A[total-1]:A[(E-1)%total]}function bb(a){"undefined"==typeof a&&ib("No slide found"),jb("Image: "+a.id),jb("Previous Image: "+E),F=E,E=a.id,o&&(B[F].element.firstChild.className="photo-button",B[E].element.firstChild.className+=" photo-button-active"),db(n,a,function(){X(a.invert),cb(a);var b=P.style.display;P.style.display="",I=P.offsetWidth,P.style.display=b})}function cb(a){K.href=a.link,O.innerHTML=a.title,P.innerHTML=a.desc}function db(a,b,c){var d=500,e=A[F].style,f=b.style;switch(f.display="",a){case"fade":f.opacity=0,f.webkitTransitionDuration=f.MozTransitionDuration=f.msTransitionDuration=f.OTransitionDuration=f.transitionDuration=d+"ms",f.webkitTranstion=f.msTranstion=f.MozTranstion=f.OTranstion=f.transition="opacity "+d/1e3+"s",e.opacity=0,animateFinish=function(){f.opacity=100,fb(b.id)};break;case"slide":f.marginLeft=-1*(u+(u-s/b.width*b.style.zoom)),f.webkitTransitionDuration=f.MozTransitionDuration=f.msTransitionDuration=f.OTransitionDuration=f.transitionDuration=d+"ms",f.webkitTranstion=f.msTranstion=f.MozTranstion=f.OTranstion=f.transition="margin-left "+d/1e3+"s",animateFinish=function(){f.marginLeft=0,fb(b.id)};break;default:ib("No transition found")}setTimeout(function(){"undefined"!=typeof animateFinish&&animateFinish(),"undefined"!=typeof G&&G.stop(),G=new lb(Z,l),"undefined"!=typeof c&&c(),U()},d)}function eb(a){var b=a.style,c=a.width/u,d=a.height/s,e=0,f=0,g=0;e=c>d?s/a.height:u/a.width,f=(s-e*a.height)/2,g=(u-e*a.width)/2,b.zoom=e,b.top=f+"px",b.left=g+"px",jb("Resize {Zoom: "+e+", Left: "+g+", Top: "+f+"}")}function fb(a){"undefined"==typeof a&&(a="nope");for(var b=0;total>b;b++)b!=a&&(A[b].style.display="none")}function gb(){"undefined"!=typeof G&&(N.style.width=G.getRemainingTime()/(l/S.offsetWidth)+"px"),setTimeout(gb,5)}function hb(){var a=window,b=document,c=b.documentElement,d=b.getElementsByTagName("body")[0],e=a.innerWidth||c.clientWidth||d.clientWidth,f=a.innerHeight||c.clientHeight||d.clientHeight;return{x:e,y:f}}function ib(a){throw"SlideShow: "+a}function jb(a){x&&console.log("DEBUG SlideShow: "+a)}function kb(a,b,c,d,e,f){jb("Adding "+a+" to slides");var i,g=0,h=0,j=!1,k=document.createElement("img");k.className="slide-image",k.id="slide-"+a,k.onload=function(){A[a].height=this.height,A[a].width=this.width,A[a].style=this.style,L.appendChild(k),jb("Image "+this.src+" loaded"),A[a].loaded=!0},k.src=b,k.style.display="none",this.id=a,this.img=b,this.title=c,this.link=d,this.desc=e,this.invert=f,this.width=g,this.height=h,this.loaded=j,this.style=i,this.removeAnimations=function(){var a=k.style;a.webkitTransitionDuration=a.MozTransitionDuration=a.msTransitionDuration=a.OTransitionDuration=a.transitionDuration="",a.webkitTransformDuration=a.MozTransformDuration=a.msTransformDuration=a.OTransformDuration=a.transformDuration="",a.webkitAnimationDuration=a.MozAnimationDuration=a.msAnimationDuration=a.OAnimationDuration=a.animationDuration="",a.webkitTranstion=a.msTranstion=a.MozTranstion=a.OTranstion=a.transition="",a.webkitTransform=a.msTransform=a.MozTransform=a.OTransform=a.transform="",a.webkitAnimation=a.msAnimation=a.MozAnimation=a.OAnimation=a.animation=""}}function lb(a,b){function j(){jb("Timer interval: "+b),g=(new Date).getTime(),h=setTimeout(a,b),i=!1}function k(){i||(b=l(),clearTimeout(h),i=!0)}function l(){return i?b:b-((new Date).getTime()-g)}var g,h,i=!0;this.start=function(){j()},this.stop=function(){k()},this.getRemainingTime=function(){return l()},j()}var G,I,J,K,L,N,O,P,S,i=!0,j=!1,k=!1,l=1e4,m=!0,n="fade",o=!1,p=!1,q=!0,r="Click for more!",s=550,t=!1,u=925,v=!1,w=!1,x=!1,y=void 0,z=!1,A=new Array,B=new Array,D=!1,E=void 0,F=void 0,H=new Array,R=void 0;this.addSlide=function(){if(arguments.length<0)return ib("No slides to add"),0;total=arguments.length,"undefined"==typeof E&&(E=total-1,F=total-1);for(var a=0;arguments.length>a;a++){var b="#000000";"undefined"!=typeof arguments[a].invert&&(b=arguments[a].invert),A.push(new kb(a,arguments[a].img,arguments[a].title,arguments[a].link,arguments[a].desc,b))}},this.start=function(){Y()},this.next=function(){Z()},this.previous=function(){_()},this.pause=function(){jb("pause"),G.stop()},this.resume=function(){jb("resume"),G.start()},this.init=function(){T(a),V()}}